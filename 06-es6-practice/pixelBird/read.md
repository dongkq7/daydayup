### 面向对象的方式来书写逻辑
思考的切入点与面向过程有所不同，面向对象的切入点是先思考该程序存在哪些对象？

1. 对于该程序来说，存在如下对象：

- 天空
- 小鸟
- 水管
- 大地
可以将这些对象抽象成一个个类，然后可以发现这些类有个共同的特点就是：都是可以移动的，那么为他们设置一个共同的父类，这个父类就是可移动的矩形

2. 那么矩形类用哪些属性和方法呢？
   属性：宽度、高度、横坐标、纵坐标、横向速度、纵向速度（有的是横向移动的有的是纵向移动的，单位像素/秒）、对应的dom对象
   方法：

- 显示这个物体到页面上（将物体渲染出来）
- 移动矩形（传递时间：秒，按照指定时间与速度去移动），根据速度与时间计算出横向移动距离与纵向移动距离，然后计算出新的坐标，最后重新渲染

3. 接下来这些类便可以继承该矩形类来实现自己的逻辑



### 天空、大地

对于天空和大地来说，除了有有移动逻辑外，还要在移动逻辑上加入临界点的判断，超过临界点的时候还还原位置，去实现移动时无缝衔接的效果。

所以对于天空和大地来说，要在移动方法中增加判断，那么如何去实现呢？

此时可以通过在天空和大地类中增加判断逻辑的方法，然后在父类中的移动方法中去判断该对象是否拥有这个判断方法，如果有的话就去调用该方法，这样就可以在执行移动方法的同时来实现无缝衔接效果了。

> 对于天空和大地来说，width可以设置成父容器的2倍
>
> 当left的值小于等于宽度一半时来将left重新设置为0即可

### 小鸟

 对于小鸟来说，有以下特点：

1. 在水平方向上没有速度，在垂直方向上刚开始速度为0，然后向下的速度是越来越快，所以对于小鸟来说xSpeed = 0，初始ySpeed也是0，然后有个加速度越来越快。所以除了调取父类的move方法外，应该去不断修改ySpeed
2. 小鸟在竖直方向上的移动距离最小为0，最大为游戏面板高度-大地高度 - 小鸟自身高度
3. 小鸟有自己的跳跃方法，每次跳跃时向上移动一段距离，这里只需要改变小鸟数值方向上的速度即可，不用手动去调取render方法。因为在下一帧执行move方法的时候会去调取render
4. 小鸟有煽动翅膀的方法，可以使用定时器实现，不断去改变小鸟的翅膀状态。同时应该存在一个停止煽动的方法。



### 水管

对于水管来说，有以下特点：

1. 水管是成对出现的，而且之间的空隙是一样的，一个水管的高度决定了另一个水管的高度。所以对于水管来说可以拆陈成三个类来处理：单个水管类和一对水管类，以及一对水管的生产类

- 对于单个水管来说：

  - 宽度固定，高度不定需要传递，横坐标起初可以固定位游戏面板的宽度，纵坐标也不固定需要传递，横向速度与大地速度相同也是需要传递的，纵向速度为0，由于水管的dom对象是不断生成的所以也得传递
  - 当水管的left值小于负的自身宽度时，要进行移除操作

- 对于一对水管来说：

  - 是一个单独的类，没有父类。有上水管与下水管，所以要创建上水管与下水管。上水管与下水管空隙的高度是固定的。

  - 上水管：top为0，ySpeed与大地的相同，高度通过函数随机生成。可以先固定最小值为80，那么最大高度 = landTop - 80 - 空隙高度，那么上水管的高度将在最小值80与最大值之间产生；那么下水管的高度就是landTop - 上水管高度 - 空隙高度

  - 下水管：top为landTop - 自身高度，xSpeed也与大地的相同

  - 创建上水管与下水管的DOM对象，并设置className，然后加入到游戏区域中。

    > 需要注意的是，此时要在水管父类中的constructor中加上调取render方法的逻辑，确保创建的水管DOM属性能够及时更新。虽然调取move方法后也会render，但是没有及时更新会出现一闪一闪的卡顿的现象。render方法被调用是为了确保在对象的属性发生变化后，DOM 元素的显示能够及时更新。具体来说，render方法的作用是将对象的属性（如宽度、高度、位置等）应用到对应的 DOM 元素上，从而使得页面上的显示与对象的状态保持一致。

  - 为一对水管添加移动方法，方法中分别调取上水管的移动方法以及下水管的移动方法。

- 对于一对水管的生产类来说要不断去产生一对水管，设置一个数组来存放产生的水管对，需要注意的是虽然dom超过一定范围后会被移除，但是数组内容会越来越多，所以要对数组中用不到的水管对进行移除。
  -  那么怎么来判断这对水管是否可以从数组中移除呢？可以为水管类创建一个访问器属性，来返回水管的left值是否小于负自身的宽度，进而可以判断该对水管是否移除了。然后在产生水管对方法中去循环判断，将已经移除dom的水管在数组中移除即可。



### 游戏类

此类用于将所有类整合起来，让各个类执行各自操作。

- 所有物体开始移动
- 注册键盘事件：Enter开始/暂停、空格小鸟跳跃

- 在移动过程中不断去判断是否游戏结束了，游戏结束：小鸟碰到地面或者碰到水管即视为游戏结束

  > 判断两个矩形是否碰撞的方法：两个矩形的中心点的横向距离的绝对值是否小于他们宽度之和的一半，并且两个矩形中心点的纵向距离要小于他们高度之和的一半